<%
   start_weight = Weight.new
   start_weight.raw = @keg.start_raw
   start_weight.keg_id = @keg.id
   pints_full = start_weight.get_beer_count.to_s
   last_weight = @weights_by_keg.last
   pints_left = last_weight.get_beer_count.to_s()
%>

<h1><%= @keg.name %></h1>

<div id="weights_chart">
</div>
<br><br>
<table>
  <tbody>
    <tr>
      <th>Name</th>
      <td><%= @keg.name %></td>
    </tr>
    <tr>
      <th>Gallons</th>
      <td><%= @keg.volume %></td>
    </tr>
    <tr>
      <th>ABV</th>
      <td><%= @keg.abv %></td>
    </tr>
    <tr>
      <th>Link</th>
      <td><%= @keg.link %></td>
    </tr>
    <tr>
      <th>Started</th>
      <td><%= @keg.start_date %></td>
    </tr>
    <tr>
      <th>Finished</th>
      <td><%= @keg.end_date %></td>
    </tr>
    <tr>
      <th># Pints Full</th>
      <td><%= pints_full %></td>
    </tr>
    <tr>
      <th># Pints Left</th>
      <td><%= '%.1f' % pints_left %></td>
    </tr>
  </tbody>
</table>
<script>
  // chart data is for highcharts. data now in pints
  var chart_data = [<%= @weights_by_keg.map { |w| "["+w.created_at.to_i.to_s+"000,"+w.get_beer_count.to_s+"]" }.join(',') %>]
</script>

<br>
<%= link_to 'Edit', edit_keg_path(@keg) %> |
<%= link_to 'Back', kegs_path %>
